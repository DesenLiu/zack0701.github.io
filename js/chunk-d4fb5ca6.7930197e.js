(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4fb5ca6"],{1276:function(t,s,e){"use strict";var i=e("d784"),a=e("44e7"),n=e("825a"),r=e("1d80"),c=e("4840"),d=e("8aa5"),o=e("50c4"),l=e("14c3"),u=e("9263"),f=e("d039"),h=[].push,v=Math.min,p=4294967295,g=!f((function(){return!RegExp(p,"y")}));i("split",2,(function(t,s,e){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(r(this)),n=void 0===e?p:e>>>0;if(0===n)return[];if(void 0===t)return[i];if(!a(t))return s.call(i,t,n);var c,d,o,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=new RegExp(t.source,f+"g");while(c=u.call(g,i)){if(d=g.lastIndex,d>v&&(l.push(i.slice(v,c.index)),c.length>1&&c.index<i.length&&h.apply(l,c.slice(1)),o=c[0].length,v=d,l.length>=n))break;g.lastIndex===c.index&&g.lastIndex++}return v===i.length?!o&&g.test("")||l.push(""):l.push(i.slice(v)),l.length>n?l.slice(0,n):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:s.call(this,t,e)}:s,[function(s,e){var a=r(this),n=void 0==s?void 0:s[t];return void 0!==n?n.call(s,a,e):i.call(String(a),s,e)},function(t,a){var r=e(i,t,this,a,i!==s);if(r.done)return r.value;var u=n(t),f=String(this),h=c(u,RegExp),m=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),C=new h(g?u:"^(?:"+u.source+")",b),y=void 0===a?p:a>>>0;if(0===y)return[];if(0===f.length)return null===l(C,f)?[f]:[];var x=0,A=0,_=[];while(A<f.length){C.lastIndex=g?A:0;var w,k=l(C,g?f:f.slice(A));if(null===k||(w=v(o(C.lastIndex+(g?0:A)),f.length))===x)A=d(f,A,m);else{if(_.push(f.slice(x,A)),_.length===y)return _;for(var S=1;S<=k.length-1;S++)if(_.push(k[S]),_.length===y)return _;A=x=w}}return _.push(f.slice(x)),_}]}),!g)},"2f14":function(t,s,e){"use strict";e.d(s,"a",(function(){return r}));e("99af"),e("fb6a");var i=e("d4ec"),a=e("bee2"),n=function(){function t(){Object(i["a"])(this,t)}return Object(a["a"])(t,[{key:"quertString",value:function(t){var s="";for(var e in t)s+="".concat(e,"=").concat(t[e],"&");return s.slice(0,-1)}}]),t}(),r=new n},"99af":function(t,s,e){"use strict";var i=e("23e7"),a=e("d039"),n=e("e8b5"),r=e("861d"),c=e("7b0b"),d=e("50c4"),o=e("8418"),l=e("65f0"),u=e("1dde"),f=e("b622"),h=e("2d00"),v=f("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",m=h>=51||!a((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),b=u("concat"),C=function(t){if(!r(t))return!1;var s=t[v];return void 0!==s?!!s:n(t)},y=!m||!b;i({target:"Array",proto:!0,forced:y},{concat:function(t){var s,e,i,a,n,r=c(this),u=l(r,0),f=0;for(s=-1,i=arguments.length;s<i;s++)if(n=-1===s?r:arguments[s],C(n)){if(a=d(n.length),f+a>p)throw TypeError(g);for(e=0;e<a;e++,f++)e in n&&o(u,f,n[e])}else{if(f>=p)throw TypeError(g);o(u,f++,n)}return u.length=f,u}})},a6ad:function(t,s,e){},a821:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"address"},[i("van-nav-bar",{attrs:{title:"提交订单","left-arrow":"",fixed:!0},on:{"click-left":function(s){return t.$router.go(-1)}}}),i("div",{staticClass:"container"},[t._m(0),i("div",{staticClass:"one-box"},[t.addActive?i("div",{staticClass:"address-info clearfix",on:{click:t.slideWin}},[i("div",{staticClass:"address-icon fl"},[i("van-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1),i("div",{staticClass:"user-info fl"},[i("div",{staticClass:"add"},[t._v(t._s(t.currentAddress.address))]),i("div",{staticClass:"info-center clearfix"},[i("div",{staticClass:"fl name"},[t._v(t._s(t.currentAddress.name))]),i("div",{staticClass:"fl pto"},[t._v(t._s(t.currentAddress.tel))])])]),i("div",{staticClass:"right-icon fr"},[i("van-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]):i("div",{staticClass:"address-info"},[i("div",{staticClass:"address-h clearfix",on:{click:t.slideWin}},[i("div",{staticClass:"address-icon fl"},[i("van-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1),i("div",{staticClass:"address-text fl"},[t._v("请选择你的地址")])])])])]),i("div",{staticClass:"line"}),i("div",{staticClass:"shopBox"},[i("div",{staticClass:"shop-item"},[i("div",{staticClass:"item-top clearfix"},[i("div",{staticClass:"fl item-icon"},[i("img",{staticClass:"auto-img",attrs:{src:e("e0c3"),alt:""}})]),i("div",{staticClass:"fl item-title"},[t._v("订单待付款")]),i("div",{staticClass:"fr item-right"},[i("van-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]),i("div",{staticClass:"item-content"},[i("div",{staticClass:"total-count"},[t._v("共"+t._s(t.product.count)+"件")]),t._l(t.shopbagData,(function(s,e){return i("div",{key:e,staticClass:"item clearfix"},[i("div",{staticClass:"fl ruls"},[t._v(" "+t._s(s.name)+" "),i("span",{staticClass:"r"},[t._v(t._s(s.rule))])]),i("div",{staticClass:"fr count-box"},[i("span",{staticClass:"count"},[t._v("*"+t._s(s.count))])])])})),i("div",{staticClass:"bottom clearfix"},[i("div",{staticClass:"l-text fl"},[t._v("小计:")]),i("div",{staticClass:"l-total fr"},[t._v("￥"+t._s(t.product.total))])])],2)])]),i("div",{staticClass:"pay-btn"},[i("div",{staticClass:"btnBot",on:{click:t.pay}},[t._v("确认付款")])]),i("van-popup",{attrs:{position:"bottom"},model:{value:t.isOpen,callback:function(s){t.isOpen=s},expression:"isOpen"}},[i("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{select:t.selectAddress,add:t.newAddress,edit:t.edit},model:{value:t.chosenAddressId,callback:function(s){t.chosenAddressId=s},expression:"chosenAddressId"}})],1)],1)},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tog-btn clearfix"},[e("div",{staticClass:"fl btn active"},[t._v("寄件")]),e("div",{staticClass:"fl btn ml"},[t._v("自取")])])}],n=(e("d81d"),e("b0c0"),e("ac1f"),e("1276"),e("a6ad"),e("2f14")),r={data:function(){return{addActive:!1,chosenAddressId:"",isOpen:!1,list:[],currentAddress:{name:"",tel:"",address:""},sids:[],product:{count:0,total:0},shopbagData:[]}},methods:{edit:function(t){var s=t.id;this.$router.push({name:"Newaddress",query:{aid:s}})},slideWin:function(){this.isOpen=!0},newAddress:function(){this.$router.push({name:"Newaddress"})},selectAddress:function(t,s){for(var e in this.isOpen=!1,this.currentAddress)this.currentAddress[e]=t[e];this.addActive=!0},findAddress:function(){var t=this,s=localStorage.getItem("_token");this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appkey,tokenString:s}}).then((function(s){2e4==s.data.code&&s.data.result.map((function(s){t.list.push({id:s.aid,name:s.name,tel:s.tel,address:s.province+s.city+s.county+s.addressDetail,isDefault:Boolean(s.isDefault)}),Boolean(s.isDefault)&&(t.chosenAddressId=s.aid,t.currentAddress.address=s.province+s.city+s.county+s.addressDetail,t.currentAddress.name=s.name,t.currentAddress.tel=s.tel,t.addActive=!0)}))})).catch((function(t){}))},getShopbagDataBySids:function(){var t=this,s=localStorage.getItem("_token");s&&this.axios({method:"GET",url:"/commitShopcart",params:{appkey:this.appkey,tokenString:s,sids:JSON.stringify(this.sids)}}).then((function(s){5e4==s.data.code&&(s.data.result.map((function(s){t.product.count+=s.count,t.product.total+=s.count*s.price})),t.shopbagData=s.data.result)})).catch((function(t){}))},pay:function(){var t=this;if(this.chosenAddressId){var s=localStorage.getItem("_token");if(s){var e=n["a"].quertString({appkey:this.appkey,tokenString:s,sids:JSON.stringify(this.sids),phone:this.currentAddress.tel,address:this.currentAddress.address,receiver:this.currentAddress.name});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/pay",data:e}).then((function(s){t.$toast.clear(),6e4==s.data.code&&t.$router.push({name:"Order"})})).catch((function(s){t.$toast.clear()}))}}else this.$toast("请选择收货地址")}},created:function(){this.sids=this.$route.query.sids.split("-"),this.findAddress(),this.getShopbagDataBySids()}},c=r,d=e("2877"),o=Object(d["a"])(c,i,a,!1,null,"73362bde",null);s["default"]=o.exports},b0c0:function(t,s,e){var i=e("83ab"),a=e("9bf2").f,n=Function.prototype,r=n.toString,c=/^\s*function ([^ (]*)/,d="name";i&&!(d in n)&&a(n,d,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},bee2:function(t,s,e){"use strict";function i(t,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,s,e){return s&&i(t.prototype,s),e&&i(t,e),t}e.d(s,"a",(function(){return a}))},d4ec:function(t,s,e){"use strict";function i(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}e.d(s,"a",(function(){return i}))},d81d:function(t,s,e){"use strict";var i=e("23e7"),a=e("b727").map,n=e("1dde"),r=e("ae40"),c=n("map"),d=r("map");i({target:"Array",proto:!0,forced:!c||!d},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},e0c3:function(t,s,e){t.exports=e.p+"img/待配送.11266a54.png"}}]);
//# sourceMappingURL=chunk-d4fb5ca6.7930197e.js.map